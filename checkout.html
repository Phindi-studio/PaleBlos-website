document.addEventListener("DOMContentLoaded", () => {
  // Simulated total from cart (you can replace with localStorage or URL param)
  let cartTotal = parseFloat(localStorage.getItem("cartTotal")) || 0;

  const productTotal = document.getElementById("productTotal");
  const deliveryFee = document.getElementById("deliveryFee");
  const finalTotal = document.getElementById("finalTotal");
  const deliveryMethod = document.getElementById("deliveryMethod");

  // Display initial totals
  productTotal.textContent = `R${cartTotal.toFixed(2)}`;
  deliveryFee.textContent = `R0.00`;
  finalTotal.textContent = `R${cartTotal.toFixed(2)}`;

  deliveryMethod.addEventListener("change", () => {
    let fee = 0;
    if (deliveryMethod.value === "paxi") fee = 60;
    if (deliveryMethod.value === "postnet") fee = 109;

    deliveryFee.textContent = `R${fee.toFixed(2)}`;
    finalTotal.textContent = `R${(cartTotal + fee).toFixed(2)}`;
  });

  document.getElementById("checkout-form").addEventListener("submit", function (e) {
    e.preventDefault();

    // Optional: validate fields
    const name = document.getElementById("fullName").value;
    const phone = document.getElementById("phone").value;
    const address = document.getElementById("address").value;
    const city = document.getElementById("city").value;
    const postal = document.getElementById("postal").value;
    const method = deliveryMethod.value;

    if (!name || !phone || !address || !city || !postal || !method) {
      alert("Please fill in all fields and choose a delivery method.");
      return;
    }

    // Redirect to payment (or trigger PayFast here)
    alert(`Thank you ${name}! Proceeding to secure payment...`);

    // Later: Replace with actual redirect or payment trigger
    window.location.href = "https://payfast.io/"; 
  });
});
